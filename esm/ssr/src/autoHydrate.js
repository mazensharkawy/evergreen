import { hydrate as boxHydrate } from 'ui-box';
import { rehydrate } from 'glamor';
import canUseDom from '../../lib/canUseDom';
/**
 * You shouldn't have to manually run this.
 * This is mainly an export for testing purposes.
 */

export function hydrate(hydration) {
  if (hydration.uiBoxCache) {
    boxHydrate(hydration.uiBoxCache);
  }

  if (hydration.glamorIds) {
    rehydrate(hydration.glamorIds);
  }
}
export default function autoHydrate() {
  if (canUseDom) {
    var hydration = document.querySelector('#evergreen-hydrate');

    if (hydration) {
      try {
        var hydrationObject = JSON.parse(hydration.innerHTML);
        hydrate(hydrationObject);
      } catch (error) {
        console.error('Evergreen automatic hydration object is invalid JSON', error);
      }
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zc3Ivc3JjL2F1dG9IeWRyYXRlLmpzIl0sIm5hbWVzIjpbImh5ZHJhdGUiLCJib3hIeWRyYXRlIiwicmVoeWRyYXRlIiwiY2FuVXNlRG9tIiwiaHlkcmF0aW9uIiwidWlCb3hDYWNoZSIsImdsYW1vcklkcyIsImF1dG9IeWRyYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaHlkcmF0aW9uT2JqZWN0IiwiSlNPTiIsInBhcnNlIiwiaW5uZXJIVE1MIiwiZXJyb3IiLCJjb25zb2xlIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxPQUFPLElBQUlDLFVBQXBCLFFBQXNDLFFBQXRDO0FBQ0EsU0FBU0MsU0FBVCxRQUEwQixRQUExQjtBQUNBLE9BQU9DLFNBQVAsTUFBc0IscUJBQXRCO0FBRUE7Ozs7O0FBSUEsT0FBTyxTQUFTSCxPQUFULENBQWlCSSxTQUFqQixFQUE0QjtBQUNqQyxNQUFJQSxTQUFTLENBQUNDLFVBQWQsRUFBMEI7QUFDeEJKLElBQUFBLFVBQVUsQ0FBQ0csU0FBUyxDQUFDQyxVQUFYLENBQVY7QUFDRDs7QUFFRCxNQUFJRCxTQUFTLENBQUNFLFNBQWQsRUFBeUI7QUFDdkJKLElBQUFBLFNBQVMsQ0FBQ0UsU0FBUyxDQUFDRSxTQUFYLENBQVQ7QUFDRDtBQUNGO0FBRUQsZUFBZSxTQUFTQyxXQUFULEdBQXVCO0FBQ3BDLE1BQUlKLFNBQUosRUFBZTtBQUNiLFFBQU1DLFNBQVMsR0FBR0ksUUFBUSxDQUFDQyxhQUFULENBQXVCLG9CQUF2QixDQUFsQjs7QUFFQSxRQUFJTCxTQUFKLEVBQWU7QUFDYixVQUFJO0FBQ0YsWUFBTU0sZUFBZSxHQUFHQyxJQUFJLENBQUNDLEtBQUwsQ0FBV1IsU0FBUyxDQUFDUyxTQUFyQixDQUF4QjtBQUNBYixRQUFBQSxPQUFPLENBQUNVLGVBQUQsQ0FBUDtBQUNELE9BSEQsQ0FHRSxPQUFPSSxLQUFQLEVBQWM7QUFDZEMsUUFBQUEsT0FBTyxDQUFDRCxLQUFSLENBQ0Usc0RBREYsRUFFRUEsS0FGRjtBQUlEO0FBQ0Y7QUFDRjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHlkcmF0ZSBhcyBib3hIeWRyYXRlIH0gZnJvbSAndWktYm94J1xuaW1wb3J0IHsgcmVoeWRyYXRlIH0gZnJvbSAnZ2xhbW9yJ1xuaW1wb3J0IGNhblVzZURvbSBmcm9tICcuLi8uLi9saWIvY2FuVXNlRG9tJ1xuXG4vKipcbiAqIFlvdSBzaG91bGRuJ3QgaGF2ZSB0byBtYW51YWxseSBydW4gdGhpcy5cbiAqIFRoaXMgaXMgbWFpbmx5IGFuIGV4cG9ydCBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGh5ZHJhdGUoaHlkcmF0aW9uKSB7XG4gIGlmIChoeWRyYXRpb24udWlCb3hDYWNoZSkge1xuICAgIGJveEh5ZHJhdGUoaHlkcmF0aW9uLnVpQm94Q2FjaGUpXG4gIH1cblxuICBpZiAoaHlkcmF0aW9uLmdsYW1vcklkcykge1xuICAgIHJlaHlkcmF0ZShoeWRyYXRpb24uZ2xhbW9ySWRzKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGF1dG9IeWRyYXRlKCkge1xuICBpZiAoY2FuVXNlRG9tKSB7XG4gICAgY29uc3QgaHlkcmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V2ZXJncmVlbi1oeWRyYXRlJylcblxuICAgIGlmIChoeWRyYXRpb24pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGh5ZHJhdGlvbk9iamVjdCA9IEpTT04ucGFyc2UoaHlkcmF0aW9uLmlubmVySFRNTClcbiAgICAgICAgaHlkcmF0ZShoeWRyYXRpb25PYmplY3QpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICdFdmVyZ3JlZW4gYXV0b21hdGljIGh5ZHJhdGlvbiBvYmplY3QgaXMgaW52YWxpZCBKU09OJyxcbiAgICAgICAgICBlcnJvclxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=